(this["webpackJsonptnoodle-ui"]=this["webpackJsonptnoodle-ui"]||[]).push([[0],Array(22).concat([function(t,e,n){t.exports=n(56)},,,,,function(t,e,n){},,,,,,function(t,e,n){},function(t,e,n){var a={"./222.svg":35,"./333.svg":36,"./333bf.svg":37,"./333fm.svg":38,"./333mbf.svg":39,"./333oh.svg":40,"./444.svg":41,"./444bf.svg":42,"./555.svg":43,"./555bf.svg":44,"./666.svg":45,"./777.svg":46,"./clock.svg":47,"./minx.svg":48,"./pyram.svg":49,"./skewb.svg":50,"./sq1.svg":51};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}o.keys=function(){return Object.keys(a)},o.resolve=r,t.exports=o,o.id=34},function(t,e,n){t.exports=n.p+"static/media/222.ee5d629a.svg"},function(t,e,n){t.exports=n.p+"static/media/333.56c81f38.svg"},function(t,e,n){t.exports=n.p+"static/media/333bf.570ee151.svg"},function(t,e,n){t.exports=n.p+"static/media/333fm.b0b8e039.svg"},function(t,e,n){t.exports=n.p+"static/media/333mbf.8e05b3e4.svg"},function(t,e,n){t.exports=n.p+"static/media/333oh.c70ef197.svg"},function(t,e,n){t.exports=n.p+"static/media/444.94fd8058.svg"},function(t,e,n){t.exports=n.p+"static/media/444bf.4d6669fb.svg"},function(t,e,n){t.exports=n.p+"static/media/555.b5f1d3b6.svg"},function(t,e,n){t.exports=n.p+"static/media/555bf.019829df.svg"},function(t,e,n){t.exports=n.p+"static/media/666.9d9fcb49.svg"},function(t,e,n){t.exports=n.p+"static/media/777.0548ecd6.svg"},function(t,e,n){t.exports=n.p+"static/media/clock.dc5f689d.svg"},function(t,e,n){t.exports=n.p+"static/media/minx.e8cd90c0.svg"},function(t,e,n){t.exports=n.p+"static/media/pyram.539494f0.svg"},function(t,e,n){t.exports=n.p+"static/media/skewb.c399da94.svg"},function(t,e,n){t.exports=n.p+"static/media/sq1.f2b83832.svg"},function(t,e,n){},function(t,e,n){t.exports=n.p+"static/media/tnoodle_logo.0147e6d0.svg"},,function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(12),i=n.n(r),c=(n(27),n(3)),s=n(4),l=n(7),u=n(6),p=n(2),d="UPDATE_ME",m="UPDATE_EVENTS",f="UPDATE_PASSWORD",b="UPDATE_COMPETITION_NAME",h="UPDATE_WCA_EVENT",g="UPDATE_MBLD",v="SET_BEST_MBLD_ATTEMPT",y="UPDATE_COMPETITIONS",E="UPDATE_COMPETITION_ID",w="UPDATE_WCIF",O="UPDATE_EDITING_STATUS",N="UPDATE_OFFICIAL_ZIP_STATUS",T="UPDATE_FILE_ZIP_BLOB",j="ADD_CACHED_OBJECT",S="UPDATE_TRANSLATIONS",C="UPDATE_TRANSLATION",A="RESET_TRANSLATIONS",F="SELECT_ALL_TRANSLATIONS",D="ADD_SUGGESTED_FMC_TRANSLATIONS",k="SET_SUGGESTED_FMC_TRANSLATIONS",R="SET_WCA_FORMATS",_="SET_WCA_EVENTS",I="UPDATE_FLASH_MESSAGE",M=function(t){return{type:b,payload:{competitionName:t}}},P=function(t){return{type:T,payload:{fileZipBlob:t}}},B=function(t){return{type:k,payload:{suggestedFmcTranslations:t}}},x=function(t,e){return{type:I,payload:{text:t,bootstrapBackground:e}}},L=n(5),W=function(){return"Scrambles for "+(new Date).toISOString().split("T")[0]};function Z(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(p.a)(t);if(e){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var U,V={updatePassword:function(t){return{type:f,payload:{password:t}}},updateCompetitionName:M,updateFileZipBlob:P},G=Object(L.b)((function(t){return{editingDisabled:t.editingDisabled,competitionName:t.wcif.name}}),V)(function(t){Object(l.a)(n,t);var e=Z(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).handleCompetitionNameChange=function(t){a.props.updateCompetitionName(t.target.value),a.props.updateFileZipBlob(null)},a.handlePasswordChange=function(t){var e=a.state;e.password=t.target.value,a.setState(e),a.props.updatePassword(a.state.password),a.props.updateFileZipBlob(null)},a.toogleShowPassword=function(){var t=a.state;t.showPassword=!t.showPassword,a.setState(t)},a.state={editingDisabled:t.editingDisabled,password:"",showPassword:!1},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.updateCompetitionName(W())}},{key:"render",value:function(){var t=this.props.competitionName,e=this.props.editingDisabled;return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"container mt-2"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 text-left form-group"},o.a.createElement("label",{className:"font-weight-bold pr-1"},"Competition Name"),o.a.createElement("input",{className:"form-control",placeholder:"Competition Name",onChange:this.handleCompetitionNameChange,value:t,disabled:e?"disabled":""})),o.a.createElement("div",{className:"col-md-6 text-left form-group"},o.a.createElement("label",{className:"font-weight-bold pr-1"},"Password"),o.a.createElement("input",{className:"form-control",placeholder:"Password",type:this.state.showPassword?"":"password",onChange:this.handlePasswordChange,value:this.state.password}),o.a.createElement("div",{onClick:this.toogleShowPassword},o.a.createElement("input",{type:"checkbox",checked:this.state.showPassword,readOnly:!0}),o.a.createElement("label",null,"Show password"))))))}}]),n}(a.Component)),z=n(1),Q=n(14),H=n.n(Q),Y="https://secret-atoll-71628.herokuapp.com",J="org.worldcubeassociation.tnoodle.SheetCopyCount",q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{id:J,specUrl:"",data:{numCopies:t}}},$=function(t){return null==t?null:{languageTags:t.filter((function(t){return t.status})).map((function(t){return t.id}))}},K=function(t,e){return fetch(Y+t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})},X=n(21),tt=(U="access_token",ct(window.location.hash)[U]);function et(){return"true"===it("staging")}function nt(t){return"".concat(et()?"https://staging.worldcubeassociation.org":Object({NODE_ENV:"production",PUBLIC_URL:"/tnoodle-ui"}).REACT_APP_WCA_ORIGIN||"https://www.worldcubeassociation.org").concat(t)}function at(){if(!ot()){var t=window.location.origin+Bt+"/oauth/wca",e=nt("/oauth/authorize?client_id=".concat(et()?"example-application-id":Object({NODE_ENV:"production",PUBLIC_URL:"/tnoodle-ui"}).REACT_APP_TNOODLE_APP_ID||"6145bf3e65fbad4715b049dae2d72a64b8e9a794010abf518fa9364b05a5dd40","&redirect_uri=").concat(t,"&response_type=token&scope=public+manage_competitions"));localStorage["TNoodle.preLoginHref"]=window.location.href,window.location=e}}function ot(){return null!=localStorage["TNoodle.accessToken"]&&lt()===st()}function rt(){delete localStorage["TNoodle.lastLoginEnv"],delete localStorage["TNoodle.accessToken"],tt=null,window.location.reload()}function it(t){return ct(window.location.href.split("?").slice(-1)[0])[t]}function ct(t){return t?(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce((function(t,e){var n=e.split("="),a=Object(X.a)(n,2),o=a[0],r=a[1];return t[o]=r?decodeURIComponent(r.replace(/\+/g," ")):"",t}),{}):{}}tt?(window.location.hash="",localStorage["TNoodle.accessToken"]=tt,function(){var t=localStorage["TNoodle.preLoginHref"]||"/";localStorage["TNoodle.lastLoginEnv"]=t.includes("staging=true")?"staging":"production",delete localStorage["TNoodle.preLoginHref"],window.location.replace(t)}()):tt=localStorage["TNoodle.accessToken"];var st=function(){return localStorage["TNoodle.lastLoginEnv"]},lt=function(){return et()?"staging":"production"};function ut(t,e){var n=nt("/api/v0");return e=Object.assign({},e,{headers:new Headers({Authorization:"Bearer ".concat(tt),"Content-Type":"application/json"})}),fetch("".concat(n).concat(t),e).then((function(t){if(!t.ok)throw new Error("".concat(t.status,": ").concat(t.statusText));return t}))}function pt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(p.a)(t);if(e){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var dt={updateMbld:function(t){return{type:g,payload:{mbld:t}}},updateFileZipBlob:P},mt=Object(L.b)((function(t){return{mbld:t.mbld,bestMbldAttempt:t.bestMbldAttempt}}),dt)(function(t){Object(l.a)(n,t);var e=pt(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).handleMbldChange=function(e){t.props.updateMbld(e)},t.verifyMbld=function(){var e=t.props.mbld;e<2&&(e=2,t.handleMbldChange(e))},t.showMbldWarning=function(){var e=t.props.bestMbldAttempt;if(null!=e&&t.props.mbld<e)return o.a.createElement("tr",{className:"bg-warning"},o.a.createElement("th",{colSpan:4},"You selected ".concat(t.props.mbld," cubes for Multi-Blind, but there's a competitor who already tried ").concat(t.props.bestMbldAttempt," at a competition. Proceed if you are really certain of it.")))},t}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement("tfoot",null,o.a.createElement("tr",null,o.a.createElement("th",{colSpan:3},o.a.createElement("p",{className:"text-right"},"Select the number of scrambles")),o.a.createElement("td",null,o.a.createElement("input",{className:"form-control bg-dark text-white",type:"number",value:this.props.mbld,onChange:function(e){return t.handleMbldChange(Number(e.target.value))},min:2,onBlur:this.verifyMbld}))),this.showMbldWarning())}}]),n}(a.Component));function ft(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(p.a)(t);if(e){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var bt={updateFileZipBlob:P,updateTranslation:function(t){return{type:C,payload:{id:t}}},selectAllTranslations:function(){return{type:F,payload:{}}},resetTranslations:function(){return{type:A,payload:{}}},setSuggestedFmcTranslations:B},ht=Object(L.b)((function(t){return{translations:t.translations,suggestedFmcTranslations:t.suggestedFmcTranslations}}),bt)(function(t){Object(l.a)(n,t);var e=ft(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).handleTranslation=function(t){a.props.updateFileZipBlob(null),a.props.updateTranslation(t)},a.selectAllTranslations=function(){a.props.updateFileZipBlob(null),a.props.selectAllTranslations()},a.selectNoneTranslation=function(){a.props.updateFileZipBlob(null),a.props.resetTranslations()},a.selectSuggestedTranslations=function(){a.props.updateFileZipBlob(null),a.props.setSuggestedFmcTranslations(a.props.suggestedFmcTranslations)},a.toggleTranslations=function(){a.setState(Object(z.a)({},a.state,{showTranslations:!a.state.showTranslations}))},a.maybeShowFmcTranslationsDetails=function(){if(a.state.showTranslations&&null!=a.props.translations){var t=H.a.chunk(a.props.translations,3);return o.a.createElement(o.a.Fragment,null,o.a.createElement("tr",null,o.a.createElement("th",{colSpan:4},o.a.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:a.selectAllTranslations},"Select All"),o.a.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:a.selectNoneTranslation},"Select None"),null!=a.props.suggestedFmcTranslations&&o.a.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:a.selectSuggestedTranslations,title:"This selection is based on competitor's nationalities."},"Select Suggested"))),o.a.createElement("tr",null,o.a.createElement("th",{colSpan:4,className:"text-center"},o.a.createElement("table",{className:"table table-hover"},o.a.createElement("tbody",null,t.map((function(t,e){return o.a.createElement("tr",{key:e},t.map((function(t,e){var n,r="fmc-".concat(t.id);return o.a.createElement(o.a.Fragment,{key:e},o.a.createElement("th",null,o.a.createElement("label",{htmlFor:r},(n=t.display)[0].toUpperCase()+n.slice(1))),o.a.createElement("th",null,o.a.createElement("input",{type:"checkbox",id:r,checked:t.status,onChange:function(){return a.handleTranslation(t.id)}})),e<2&&o.a.createElement("th",null))})))})))))))}},a.state={showTranslations:!1},a}return Object(s.a)(n,[{key:"render",value:function(){return null==this.props.translations?null:o.a.createElement("tfoot",null,o.a.createElement("tr",null,o.a.createElement("th",{colSpan:4,className:"text-center"},o.a.createElement("button",{className:"btn btn-primary",onClick:this.toggleTranslations},"Translations"))),this.maybeShowFmcTranslationsDetails())}}]),n}(a.Component));n(33);function gt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(p.a)(t);if(e){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var vt={updateWcaEvent:function(t){return{type:h,payload:{wcaEvent:t}}},updateFileZipBlob:P},yt=Object(L.b)((function(t){return{editingDisabled:t.editingDisabled,wcif:t.wcif,wcaFormats:t.wcaFormats}}),vt)(function(t){Object(l.a)(a,t);var e=gt(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).getWcaEvent=function(e){return{id:t.props.event.id,rounds:e}},t.handleNumberOfRoundsChange=function(e,n){for(;n.length>e;)n.pop();for(var a=t.props.event.id;n.length<e;)n.push({id:a+"-r"+(n.length+1),format:t.props.event.format_ids[0],scrambleSetCount:1,extensions:[q()]});var o=t.getWcaEvent(n);t.updateEvent(o)},t.handleNumberOfScrambleSetsChange=function(e,n,a){if(!(n<1)){a[e].scrambleSetCount=Number(n);var o=t.getWcaEvent(a);t.updateEvent(o)}},t.handleRoundFormatChanged=function(e,n,a){a[e].format=n;var o=t.getWcaEvent(a);t.updateEvent(o)},t.handleNumberOfCopiesChange=function(e,n,a){if(!(n<1)){a[e].extensions.find((function(t){return t.id===J})).data.numCopies=n;var o=t.getWcaEvent(a);t.updateEvent(o)}},t.abbreviate=function(e){return null!=t.props.wcaFormats?t.props.wcaFormats[e].shortName:"-"},t.updateEvent=function(e){t.props.updateFileZipBlob(null),t.props.updateWcaEvent(e)},t.maybeShowTableTitles=function(t){return 0===t.length?null:o.a.createElement("tr",{className:"thead-light"},o.a.createElement("th",{scope:"col"},"#"),o.a.createElement("th",{scope:"col"},"Format"),o.a.createElement("th",{scope:"col"},"Scramble Sets"),o.a.createElement("th",{scope:"col"},"Copies"))},t.maybeShowTableBody=function(e){if(0!==e.length)return o.a.createElement("tbody",null,Array.from({length:e.length},(function(n,a){var r=e[a].extensions.find((function(t){return t.id===J})).data.numCopies;return o.a.createElement("tr",{key:a,className:"form-group"},o.a.createElement("th",{scope:"row",className:"align-middle"},a+1),o.a.createElement("td",{className:"align-middle"},o.a.createElement("select",{className:"form-control",value:e[a].format,onChange:function(n){return t.handleRoundFormatChanged(a,n.target.value,e)},disabled:t.props.editingDisabled?"disabled":""},t.props.event.format_ids.map((function(e){return o.a.createElement("option",{key:e,value:e},t.abbreviate(e))})))),o.a.createElement("td",null,o.a.createElement("input",{className:"form-control",type:"number",value:e[a].scrambleSetCount,onChange:function(n){return t.handleNumberOfScrambleSetsChange(a,Number(n.target.value),e)},min:1,disabled:t.props.editingDisabled?"disabled":""})),o.a.createElement("td",null,o.a.createElement("input",{className:"form-control",type:"number",value:r,onChange:function(n){return t.handleNumberOfCopiesChange(a,Number(n.target.value),e)},min:1})))})))},t}return Object(s.a)(a,[{key:"render",value:function(){var t=this,e=this.props.wcif.events.find((function(e){return e.id===t.props.event.id})),a=null!=e?e.rounds:[];return o.a.createElement("table",{className:"table table-sm shadow rounded"},o.a.createElement("thead",null,o.a.createElement("tr",{className:0===a.length?"thead-dark text-white":"thead-light"},o.a.createElement("th",{className:"firstColumn",scope:"col"}),o.a.createElement("th",{scope:"col",className:"align-middle secondColumn"},o.a.createElement("img",{className:"img-thumbnail cubingIcon",src:n(34)("./".concat(this.props.event.id,".svg")),alt:"TNoodle logo"})),o.a.createElement("th",{className:"align-middle lastTwoColumns",scope:"col"},o.a.createElement("h5",{className:"font-weight-bold"},this.props.event.name)),o.a.createElement("th",{className:"lastTwoColumns",scope:"col"},o.a.createElement("label",null,"Rounds"),o.a.createElement("select",{className:"form-control",value:a.length,onChange:function(e){return t.handleNumberOfRoundsChange(e.target.value,a)},disabled:this.props.editingDisabled?"disabled":""},Array.from({length:5},(function(t,e){return o.a.createElement("option",{key:e,value:e},e)}))))),this.maybeShowTableTitles(a)),this.maybeShowTableBody(a),this.props.event.is_multiple_blindfolded&&a.length>0&&o.a.createElement(mt,null),this.props.event.is_fewest_moves&&a.length>0&&o.a.createElement(ht,null))}}]),a}(a.Component));function Et(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(p.a)(t);if(e){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var wt={updateFileZipBlob:P,updateTranslations:function(t){return{type:S,payload:{translations:t}}},setWcaFormats:function(t){return{type:R,payload:{wcaFormats:t}}},setWcaEvents:function(t){return{type:_,payload:{wcaEvents:t}}},updateFlashMessage:x},Ot=Object(L.b)((function(t){return{wcif:t.wcif,mbld:t.mbld,password:t.password,editingDisabled:t.editingDisabled,competitionId:t.competitionId,officialZip:t.officialZip,fileZipBlob:t.fileZipBlob,translations:t.translations,wcaEvents:t.wcaEvents}}),wt)(function(t){Object(l.a)(n,t);var e=Et(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).componentDidMount=function(){this.getFormats(),this.getWcaEvents(),this.getFmcTranslations()},a.setFlashMessage=function(t,e,n){a.props.updateFlashMessage(t+" "+n.statusText,e)},a.getFormats=function(){fetch(Y+"/frontend/data/formats").then((function(t){if(t.ok)return t.json();a.setFlashMessage("Could not get WCA formats","danger",t)})).then((function(t){a.props.setWcaFormats(t)}))},a.getWcaEvents=function(){fetch(Y+"/frontend/data/events").then((function(t){if(t.ok)return t.json();a.setFlashMessage("Could get WCA events","danger",t)})).then((function(t){a.props.setWcaEvents(t)}))},a.getFmcTranslations=function(){fetch(Y+"/frontend/fmc/languages/available").then((function(t){if(t.ok)return t.json();a.setFlashMessage("Could not get FMC translations.","danger",t)})).then((function(t){if(t){var e=Object.keys(t).map((function(e){return{id:e,display:t[e],status:!0}}));a.props.updateTranslations(e)}}))},a.handleScrambleButton=function(){a.setState(Object(z.a)({},a.state,{competitionNameFileZip:a.props.wcif.name,generatingScrambles:!0})),function(t,e,n,a){var o={wcif:t,multiCubes:{requestedScrambles:e},fmcLanguages:$(a)};return null!=n&&n.length>0&&(o.zipPassword=n),K("/wcif/zip",o)}(a.props.wcif,a.props.mbld,a.props.password,a.props.translations).then((function(t){if(a.setGeneratingScrambles(!1),t.ok)return t.blob();a.setFlashMessage("Could not get scrambles.","danger",t)})).then((function(t){return a.props.updateFileZipBlob(t)}))},a.setGeneratingScrambles=function(t){a.setState(Object(z.a)({},a.state,{generatingScrambles:t}))},a.downloadZip=function(){var t=(!a.props.officialZip||null!=a.props.competitionId&&et()?"[UNOFFICIAL] ":"")+a.state.competitionNameFileZip+".zip",e=document.createElement("a");e.href=URL.createObjectURL(a.props.fileZipBlob),e.download=t,e.target="_blank",e.setAttribute("type","hidden"),document.body.appendChild(e),e.click(),e.remove()},a.maybeShowEditWarning=function(){if(null!=a.props.competitionId)return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("p",null,"Found ",a.props.wcif.events.length," event",a.props.wcif.events.length>1?"s":""," for ",a.props.wcif.name,"."),o.a.createElement("p",null,"You can view and change the rounds over on"," ",o.a.createElement("a",{href:nt("/competitions/".concat(a.props.competitionId,"/events/edit"))},"the WCA."),o.a.createElement("strong",null," ","Refresh this page after making any changes on the WCA website."))))},a.scrambleButton=function(){if(a.state.generatingScrambles)return o.a.createElement("button",{className:"btn btn-primary btn-lg",title:"Wait until the process is done",disabled:!0},"Generating Scrambles");if(null!=a.props.fileZipBlob)return o.a.createElement("button",{className:"btn btn-success btn-lg",onClick:a.downloadZip},"Download Scrambles");var t=!a.props.wcif.events.map((function(t){return t.rounds.length>0})).reduce((function(t,e){return t||e}),!1);return o.a.createElement("button",{className:"btn btn-primary btn-lg",onClick:a.handleScrambleButton,disabled:t,title:t?"No events selected.":""},"Generate Scrambles")},a.state={generatingScrambles:!1,competitionNameFileZip:""},a}return Object(s.a)(n,[{key:"render",value:function(){var t=this,e=this.props.wcaEvents;if(null==e)return null;var n=this.props.wcif.events,a=this.props.editingDisabled;a&&(e=e.filter((function(t){return n.find((function(e){return e.id===t.id}))})));var r=H.a.chunk(e,2),i=" col-".concat(6);return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"container-fluid"},this.maybeShowEditWarning(),r.map((function(e,n){return o.a.createElement("div",{className:"row p-0",key:n},e.map((function(e){return o.a.createElement("div",{className:i,key:e.id},o.a.createElement(yt,{event:e,wcifEvent:t.props.wcif.events.find((function(t){return t.id===e.id})),disabled:a,setBlobNull:t.setBlobNull}))})))})),o.a.createElement("div",{className:"row form-group p-3"},o.a.createElement("div",{className:"col-12"},this.scrambleButton()))))}}]),n}(a.Component)),Nt=n(9),Tt=function(){return o.a.createElement("div",{className:"spinner-border m-2",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading..."))},jt={formatVersion:"1.0",name:"",shortName:"",id:"",events:[],persons:[],schedule:{numberOfDays:0,venues:[]}};n(52);function St(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(p.a)(t);if(e){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var Ct={updateWcif:function(t){return{type:w,payload:{wcif:t}}},updateEditingStatus:function(t){return{type:O,payload:{editingDisabled:t}}},updateCompetitionName:M,updateCompetitions:function(t){return{type:y,payload:{competitions:t}}},updateMe:function(t){return{type:d,payload:{me:t}}},updateCompetitionId:function(t){return{type:E,payload:{competitionId:t}}},updateFileZipBlob:P,addCachedObject:function(t,e,n){return{type:j,payload:{competitionId:t,identifier:e,object:n}}},addSuggestedFmcTranslations:function(t){return{type:D,payload:{suggestedFmcTranslations:t}}},setSuggestedFmcTranslations:B,setBestMbldAttempt:function(t){return{type:v,payload:{bestMbldAttempt:t}}}},At=Object(L.b)((function(t){return{me:t.me,competitions:t.competitions,cachedObjects:t.cachedObjects}}),Ct)(function(t){Object(l.a)(a,t);var e=St(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).margin=1,n.setLoadingUser=function(t){n.setState(Object(z.a)({},n.state,{loadingUser:t}))},n.setLoadingCompetitions=function(t){n.setState(Object(z.a)({},n.state,{loadingCompetitions:t}))},n.setLoadingCompetitionInformation=function(t){n.setState(Object(z.a)({},n.state,{loadingCompetitionInformation:t}))},n.pluralize=function(t,e){return t+(e>1?"s":"")},n.currentLocationWithoutQuery=function(){return window.location.origin+window.location.pathname},n.setPageWithoutRedirect=function(t){window.history.pushState(null,"",t)},n.handleManualSelection=function(){n.props.updateEditingStatus(!1),n.props.updateCompetitionId(null),n.props.updateWcif(Object(z.a)({},jt)),n.props.setBestMbldAttempt(null),n.props.updateCompetitionName(W()),n.props.updateFileZipBlob(null),n.removeCompetitionIdQueryParam()},n.handleCompetitionSelection=function(t){n.updateCompetitionIdQueryParam(t);var e=n.props.cachedObjects[t];if(null==e)n.setState(Object(z.a)({},n.state,{loadingCompetitionInformation:!0,competitionId:t})),function(t){return ut("/competitions/".concat(t,"/wcif")).then((function(t){return t.json()}))}(t).then((function(e){n.setWcif(e),n.props.addCachedObject(t,"wcif",e),n.maybeAddCompetition(e.id,e.name),n.getAndCacheSuggestedFmcTranslations(e),n.getAndCacheBestMbldAttempt(e)})).catch((function(e){console.error("Could not get information for "+t,e),n.setLoadingCompetitionInformation(!1)}));else{var a=e.wcif;n.setWcif(a),n.maybeAddCompetition(a.id,a.name);var o=e.suggestedFmcTranslations;n.props.addSuggestedFmcTranslations(o);var r=e.bestMbldAttempt;n.props.setBestMbldAttempt(r)}},n.getAndCacheSuggestedFmcTranslations=function(t){(function(t){return K("/frontend/fmc/languages/competitors",t)})(t).then((function(t){return t.json()})).then((function(e){n.props.addCachedObject(t.id,"suggestedFmcTranslations",e),n.props.addSuggestedFmcTranslations(e)}))},n.getAndCacheBestMbldAttempt=function(t){(function(t){return K("/frontend/mbld/best",t)})(t).then((function(t){return t.json()})).then((function(e){var a=e.attempted;n.props.addCachedObject(t.id,"bestMbldAttempt",a),n.props.setBestMbldAttempt(a)}))},n.maybeAddCompetition=function(t,e){n.state.competitions&&(n.state.competitions.find((function(t){return t.name===e}))||n.setState(Object(z.a)({},n.state,{competitions:[].concat(Object(Nt.a)(n.state.competitions),[{id:t,name:e}])})))},n.updateCompetitionIdQueryParam=function(t){var e=new URLSearchParams(window.location.search);e.set("competitionId",t),n.setPageWithoutRedirect(n.currentLocationWithoutQuery()+"?"+e.toString())},n.removeCompetitionIdQueryParam=function(){var t=new URLSearchParams(window.location.search);t.delete("competitionId"),n.setPageWithoutRedirect(n.currentLocationWithoutQuery()+"?"+t.toString())},n.setWcif=function(t){n.setLoadingCompetitionInformation(!1),n.props.updateEditingStatus(!0),n.props.updateWcif(t),n.props.updateCompetitionId(t.id),n.props.updateCompetitionName(t.name),n.props.updateFileZipBlob(null)},n.setSuggestedFmcTranslations=function(t){null!=t&&n.props.setSuggestedFmcTranslations(t)},n.logInButton=function(){return o.a.createElement("div",{id:"login-area",className:"w-100 mt-".concat(n.margin)},o.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg btn-block btn-outline-light",onClick:ot()?rt:at},ot()?"Log Out":"Log In"),null!=n.state.me&&o.a.createElement("p",{className:"text-white mt-2"},"Welcome, ",n.state.me.name,"."," ",null!=n.state.competitions&&"You have ".concat(n.state.competitions.length," manegeable ").concat(n.pluralize(" competition",n.state.competitions.length)," upcoming.")))},n.loadingArea=function(){return n.state.loadingUser?o.a.createElement("div",{className:"text-white"},o.a.createElement(Tt,null),o.a.createElement("p",null,"Loading user...")):n.state.loadingCompetitions?o.a.createElement("div",{className:"text-white"},o.a.createElement(Tt,null),o.a.createElement("p",null,"Loading competitions...")):n.state.loadingCompetitionInformation?o.a.createElement("div",{className:"text-white"},o.a.createElement(Tt,null),o.a.createElement("p",null,"Loading information for ",n.state.competitionId,"...")):void 0},n.state={me:t.me,competitions:t.competitions,loadingUser:!1,loadingCompetitions:!1,loadingCompetitionInformation:!1,competitionId:null},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=this;null==this.state.me&&ot()&&(this.setLoadingUser(!0),ut("/me").then((function(t){return t.json()})).then((function(t){return t.me})).then((function(e){t.setState(Object(z.a)({},t.state,{me:e})),t.props.updateMe(e),t.setLoadingUser(!1)})).catch((function(e){console.error("Could not get information about the logged user",e),t.setLoadingUser(!1)}))),null==this.state.competitions&&ot()&&(this.setLoadingCompetitions(!0),function(){var t=new Date(Date.now()-6048e5);return ut("/competitions?managed_by_me=true&start=".concat(t.toISOString())).then((function(t){return t.json()}))}().then((function(e){t.setState(Object(z.a)({},t.state,{competitions:e})),t.props.updateCompetitions(e),t.setLoadingCompetitions(!1)})).catch((function(e){console.error("Could not get upcoming competitions",e),t.setLoadingCompetitions(!1)})));var e=it("competitionId");null!=e&&this.handleCompetitionSelection(e)}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"h-100"},o.a.createElement("img",{className:"tnoodle-logo mt-2",src:n(53),alt:"TNoodle logo"}),o.a.createElement("h1",{className:"display-3",id:"title"},"TNoodle"),o.a.createElement("div",null,o.a.createElement("ul",{className:"list-group"},o.a.createElement("li",null,(null!=this.state.competitions&&this.state.competitions.length)>0&&o.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg btn-block btn-outline-light mb-".concat(this.margin),onClick:this.handleManualSelection},"Manual Selection")),null!=this.state.competitions&&this.state.competitions.map((function(e,n){return o.a.createElement("li",{key:n},o.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg btn-block m-1",onClick:function(n){return t.handleCompetitionSelection(e.id)}},e.name))}))),this.loadingArea()),this.logInButton())}}]),a}(a.Component));function Ft(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(p.a)(t);if(e){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var Dt={updateFlashMessage:x},kt=Object(L.b)((function(t){return{flashMessage:t.flashMessage}}),Dt)(function(t){Object(l.a)(n,t);var e=Ft(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t=this,e=this.props.flashMessage.text,n=this.props.flashMessage.bootstrapBackground;return e&&n?(setTimeout((function(){t.props.updateFlashMessage("","")}),5e3),o.a.createElement("div",{className:"row sticky-top"},o.a.createElement("div",{className:"col-12 bg-".concat(n)},e))):null}}]),n}(a.Component));function Rt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(p.a)(t);if(e){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var _t={updateOfficialZipStatus:function(t){return{type:N,payload:{officialZip:t}}}},It=Object(L.b)(null,_t)(function(t){Object(l.a)(n,t);var e=Rt(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={currentTnoodle:null,allowedTnoodleVersions:null,runningVersion:null,officialBuild:null},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;ut("/scramble-program").then((function(t){return t.json()})).then((function(e){t.setState(Object(z.a)({},t.state,{currentTnoodle:e.current,allowedTnoodleVersions:e.allowed}))})).catch((function(t){return console.error(t)})),fetch(Y+"/version").then((function(t){return t.json()})).then((function(e){var n=e.runningVersion,a=e.officialBuild;t.setState(Object(z.a)({},t.state,{runningVersion:n,officialBuild:a}))})).catch((function(t){return console.error(t)}))}},{key:"render",value:function(){var t=this.state.runningVersion,e=this.state.allowedTnoodleVersions,n=this.state.currentTnoodle,a=this.state.officialBuild;return t&&e?t===n.name?null:a?e.includes(t)?e.includes(t)&&t!==n.name?o.a.createElement("div",{className:"row text-white text-right"},o.a.createElement("div",{className:"col-12 alert alert-info"},"You are running ",t,", which is still allowed, but you should upgrade to"," ",n.name," available"," ",o.a.createElement("a",{href:n.download},"here"),".")):null:(this.props.updateOfficialZipStatus(!1),o.a.createElement("div",{className:"row text-white text-right"},o.a.createElement("div",{className:"col-12 alert alert-danger"},"This TNoodle version is not allowed. Do not use scrambles generated in any official competition and consider downloading the latest version"," ",o.a.createElement("a",{href:this.state.currentTnoodle.download},"here"),"."))):(this.props.updateOfficialZipStatus(!1),o.a.createElement("div",{className:"row text-right"},o.a.createElement("div",{className:"col-12 alert alert-danger"},"This TNoodle version is not official and scrambles generated with this must not be used in competition. You are on version ",t,", you should use"," ",n.name," available"," ",o.a.createElement("a",{href:n.download},"here")))):null}}]),n}(a.Component));n(54),n(55);function Mt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(p.a)(t);if(e){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var Pt=function(t){Object(l.a)(n,t);var e=Mt(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-3 bg-dark sticky-top overflow-auto",id:"side-bar"},o.a.createElement(At,null)),o.a.createElement("div",{className:"col-9"},o.a.createElement(kt,null),o.a.createElement(It,null),o.a.createElement(G,null),o.a.createElement(Ot,null)))))}}]),n}(a.Component),Bt="/tnoodle-ui";Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xt=n(13),Lt=n(11),Wt={wcif:jt,mbld:35,password:"",editingDisabled:!1,officialZip:!0,fileZipBlob:null,cachedObjects:{},translations:null,suggestedFmcTranslations:null,bestMbldAttempt:null,wcaFormats:null,wcaEvents:null,flashMessage:{text:"",bootstrapBackground:""},competitions:null},Zt=Object(xt.b)((function(t,e){if(e.type===d)return Object(z.a)({},t,{me:e.payload.me});if(e.type===m)return Object(z.a)({},t,{wcif:Object(z.a)({},t.wcif,{events:e.payload.events})});if(e.type===f)return Object(z.a)({},t,{password:e.payload.password});if(e.type===b){var n=e.payload.competitionName,a=function(t){return t.replace(/[\W]/gi,"")}(n);return Object(z.a)({},t,{wcif:Object(z.a)({},t.wcif,{name:n,shortName:n,id:a})})}if(e.type===h)return Object(z.a)({},t,{wcif:Object(z.a)({},t.wcif,{events:[].concat(Object(Nt.a)(t.wcif.events.filter((function(t){return t.id!==e.payload.wcaEvent.id}))),[e.payload.wcaEvent])})});if(e.type===g)return Object(z.a)({},t,{mbld:e.payload.mbld});if(e.type===y)return Object(z.a)({},t,{competitions:e.payload.competitions});if(e.type===w){var o=e.payload.wcif||jt;return o.events.forEach((function(t){return t.rounds.forEach((function(t){return t.extensions.push(q())}))})),Object(z.a)({},t,{wcif:o})}if(e.type===O)return Object(z.a)({},t,{editingDisabled:e.payload.editingDisabled});if(e.type===E)return Object(z.a)({},t,{competitionId:e.payload.competitionId});if(e.type===N)return Object(z.a)({},t,{officialZip:e.payload.officialZip});if(e.type===T)return Object(z.a)({},t,{fileZipBlob:e.payload.fileZipBlob});if(e.type===j)return Object(z.a)({},t,{cachedObjects:Object(z.a)({},t.cachedObjects,Object(Lt.a)({},e.payload.competitionId,Object(z.a)({},t.cachedObjects[e.payload.competitionId],Object(Lt.a)({},e.payload.identifier,e.payload.object))))});if(e.type===A)return Object(z.a)({},t,{translations:Object(Nt.a)(t.translations.map((function(t){return Object(z.a)({},t,{status:!1})})))});if(e.type===C)return Object(z.a)({},t,{translations:Object(Nt.a)(t.translations.map((function(t){return Object(z.a)({},t,{status:t.id===e.payload.id?!t.status:t.status})})))});if(e.type===S)return Object(z.a)({},t,{translations:e.payload.translations});if(e.type===F)return Object(z.a)({},t,{translations:Object(Nt.a)(t.translations.map((function(t){return Object(z.a)({},t,{status:!0})})))});if(e.type===D)return Object(z.a)({},t,{suggestedFmcTranslations:e.payload.suggestedFmcTranslations});if(e.type===k){var r=t.translations.map((function(t){return Object(z.a)({},t,{status:e.payload.suggestedFmcTranslations.includes(t.id)})}));return Object(z.a)({},t,{translations:Object(Nt.a)(r)})}return e.type===v?Object(z.a)({},t,{bestMbldAttempt:e.payload.bestMbldAttempt}):e.type===R?Object(z.a)({},t,{wcaFormats:e.payload.wcaFormats}):e.type===_?Object(z.a)({},t,{wcaEvents:e.payload.wcaEvents}):e.type===I?Object(z.a)({},t,{flashMessage:{text:e.payload.text,bootstrapBackground:e.payload.bootstrapBackground}}):t||Wt}));i.a.render(o.a.createElement(L.a,{store:Zt},o.a.createElement(Pt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}]),[[22,1,2]]]);
//# sourceMappingURL=main.e92bf1c5.chunk.js.map